<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Details - Emergency Medical Portal</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
<div class="container">
    <!-- Header -->
    <header class="header-small">
        <div class="logo">
            <i class="fas fa-hospital-symbol"></i>
            <h1>Emergency Medical Portal</h1>
        </div>
        <button id="logoutBtn" class="btn btn-logout">
            <i class="fas fa-sign-out-alt"></i> Logout
        </button>
    </header>

    <!-- Patient Details -->
    <main class="patient-details">
        <!-- Status Banner -->
        <div class="status-banner emergency-active">
            <i class="fas fa-exclamation-triangle"></i>
            <span id="statusText">ðŸ”´ ACTIVE EMERGENCY</span>
            <span id="timeStamp" class="timestamp">Last Updated: 2 minutes ago</span>
        </div>

        <!-- Patient ID & Actions -->
        <div class="patient-header">
            <div class="patient-id-section">
                <h2>Patient ID: <span id="patientId">Loading...</span></h2>
                <button id="refreshBtn" class="btn btn-icon" title="Refresh Data">
                    <i class="fas fa-sync-alt"></i>
                </button>
            </div>
            <div class="action-buttons">
                <button id="printBtn" class="btn btn-secondary">
                    <i class="fas fa-print"></i> Print
                </button>
                <button id="shareBtn" class="btn btn-secondary">
                    <i class="fas fa-share-alt"></i> Share
                </button>
            </div>
        </div>

        <!-- Personal Information Card -->
        <section class="card">
            <div class="card-header">
                <i class="fas fa-user"></i>
                <h3>Personal Information</h3>
            </div>
            <div class="card-body">
                <div class="info-grid">
                    <div class="info-item">
                        <i class="fas fa-id-badge"></i>
                        <div>
                            <label>Name</label>
                            <p id="patientName">Loading...</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-calendar-alt"></i>
                        <div>
                            <label>Age</label>
                            <p id="patientAge">Loading...</p>
                        </div>
                    </div>
                    <div class="info-item critical">
                        <i class="fas fa-tint"></i>
                        <div>
                            <label>Blood Group</label>
                            <p id="bloodGroup">Loading...</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-home"></i>
                        <div>
                            <label>Address</label>
                            <p id="address">Loading...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Medical Information Card -->
        <section class="card alert-card">
            <div class="card-header emergency">
                <i class="fas fa-exclamation-circle"></i>
                <h3>Critical Medical Information</h3>
            </div>
            <div class="card-body">
                <div class="medical-item critical">
                    <h4><i class="fas fa-allergies"></i> Allergies</h4>
                    <p id="allergies" class="medical-text">Loading...</p>
                </div>
                <div class="medical-item">
                    <h4><i class="fas fa-pills"></i> Current Medications</h4>
                    <p id="medications" class="medical-text">Loading...</p>
                </div>
                <div class="medical-item">
                    <h4><i class="fas fa-heartbeat"></i> Chronic Conditions</h4>
                    <p id="chronicConditions" class="medical-text">Loading...</p>
                </div>
            </div>
        </section>

        <!-- Doctor Information Card -->
        <section class="card">
            <div class="card-header">
                <i class="fas fa-user-md"></i>
                <h3>Doctor Information</h3>
            </div>
            <div class="card-body">
                <div class="info-grid">
                    <div class="info-item">
                        <i class="fas fa-stethoscope"></i>
                        <div>
                            <label>Doctor Name</label>
                            <p id="doctorName">Loading...</p>
                        </div>
                    </div>
                    <div class="info-item">
                        <i class="fas fa-phone"></i>
                        <div>
                            <label>Doctor Phone</label>
                            <p id="doctorPhone">Loading...</p>
                        </div>
                    </div>
                </div>
                <button id="callDoctorBtn" class="btn btn-primary">
                    <i class="fas fa-phone-alt"></i> Call Doctor
                </button>
            </div>
        </section>

        <!-- Emergency Contacts Card -->
        <section class="card">
            <div class="card-header">
                <i class="fas fa-address-book"></i>
                <h3>Emergency Contacts</h3>
            </div>
            <div class="card-body">
                <div id="emergencyContactsList" class="contacts-list">
                    <!-- Contacts will be loaded here -->
                    <p class="loading">Loading contacts...</p>
                </div>
            </div>
        </section>

        <!-- Location Card -->
        <section class="card">
            <div class="card-header emergency">
                <i class="fas fa-map-marker-alt"></i>
                <h3>Current Location</h3>
            </div>
            <div class="card-body">
                <div class="location-info">
                    <div class="coordinates">
                        <p><strong>Latitude:</strong> <span id="latitude">Loading...</span></p>
                        <p><strong>Longitude:</strong> <span id="longitude">Loading...</span></p>
                        <p id="locationTime" class="location-time">Last updated: Loading...</p>
                    </div>
                    <div class="location-actions">
                        <a id="googleMapsLink" href="#" target="_blank" class="btn btn-emergency">
                            <i class="fas fa-map"></i> Open in Google Maps
                        </a>
                        <button id="directionsBtn" class="btn btn-secondary">
                            <i class="fas fa-directions"></i> Get Directions
                        </button>
                    </div>
                </div>
                <div id="mapContainer" class="map-container">
                    <!-- Map will be embedded here -->
                    <div class="map-placeholder">
                        <i class="fas fa-map"></i>
                        <p>Map loading...</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Back Button -->
        <div class="actions-footer">
            <a href="index.html" class="btn btn-secondary">
                <i class="fas fa-arrow-left"></i> Back to Search
            </a>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2024 Emergency Medical Portal. All rights reserved.</p>
        </div>
    </footer>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

<!-- Firebase Configuration -->
<script src="js/firebase-config.js"></script>

<!-- Patient Details Script -->
<script src="js/patient-details.js"></script>
</body>
</html>
